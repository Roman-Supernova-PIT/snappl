<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>YamlSerialized_OversampledImagePSF &#8212; roman_snpit_snappl 0.1.dev1+g983936208 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="../_static/basic.css?v=5a6b8c39" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=f3bc516d" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=4ae1632d" />
    <script src="../_static/documentation_options.js?v=6a448647"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="A25ePSF" href="snappl.psf.A25ePSF.html" />
    <link rel="prev" title="OversampledImagePSF" href="snappl.psf.OversampledImagePSF.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../index.html">
    <img class="logo" src="../_static/logo_black_filled.png" alt="Logo" />
    
  </a>
</p>



<p class="blurb">Software developed by the Roman SNPIT</p>






<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changes.html">Change Log</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../api.html">snappl API</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="../api.html">snappl API</a><ul>
      <li>Previous: <a href="snappl.psf.OversampledImagePSF.html" title="previous chapter">OversampledImagePSF</a></li>
      <li>Next: <a href="snappl.psf.A25ePSF.html" title="next chapter">A25ePSF</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
              <div class="related top">
                &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="snappl.psf.OversampledImagePSF.html" title="Previous document">OversampledImagePSF</a>
        </li>
        <li>
          <a href="snappl.psf.A25ePSF.html" title="Next document">A25ePSF</a>
          &rarr;
        </li>
    </ul>
  </nav>
              </div>
          

          <div class="body" role="main">
            
  <section id="yamlserialized-oversampledimagepsf">
<h1>YamlSerialized_OversampledImagePSF<a class="headerlink" href="#yamlserialized-oversampledimagepsf" title="Link to this heading">¶</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="snappl.psf.YamlSerialized_OversampledImagePSF">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">snappl.psf.</span></span><span class="sig-name descname"><span class="pre">YamlSerialized_OversampledImagePSF</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/snappl/psf.html#YamlSerialized_OversampledImagePSF"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#snappl.psf.YamlSerialized_OversampledImagePSF" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="snappl.psf.OversampledImagePSF.html#snappl.psf.OversampledImagePSF" title="snappl.psf.OversampledImagePSF"><code class="xref py py-class docutils literal notranslate"><span class="pre">OversampledImagePSF</span></code></a></p>
<p>An OversampledImagePSF with a definfed serialization format.</p>
<p>Call read() to load and write() to save.</p>
<p>The format is a yaml file.  At the base of the yaml is a dictionary with six keys:</p>
<dl class="simple">
<dt>x0<span class="classifier">float.  The x position on the array where the psf was</span></dt><dd><p>evaluated.  This should probably have been called “x” not “x0”,
because it matches the “x” parameters, not the “x0” parameter,
to get_stamp, but oh well.</p>
</dd>
<dt>y0<span class="classifier">float.  The y position on the array where the psf was</span></dt><dd><p>evaluated.  Likewise, would be better called “y”, but oh well.</p>
</dd>
<dt>shape0<span class="classifier">int.  The shape of the array to read is (shape0, shape1),</span></dt><dd><p>so shape0 is the y-size of the oversampled psf thumbnail,
and shape1 is the x-size.  Probably shape0 and shape1
should be the same, as there is probably code elsewhere
that assumes square thumbnails!</p>
</dd>
</dl>
<p>shape1 : int.  See above.</p>
<p>dtype : str.  The numpy datatype of the data array.  WORRY ABOUT ENDIANNESS.</p>
<dl class="simple">
<dt>data<span class="classifier">str.  Base-64 encoded flattend data array.  (Because yaml is</span></dt><dd><p>a text format, not a binary format, we take the 25% size hit
here to make sure it’s all ASCII and won’t cause everybody to
get all confused and start running around screaming and
waving their hands over their heads.)</p>
</dd>
</dl>
<p>Make an OversampledImagePSF.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>2d numpy array</em><em> or </em><em>None</em>) – The image data of the oversampled PSF.  If None, then this
needs, somehow, to be set later.  (Usually that will be
handled by something in a subclass of OversampledImagePSF;
if you’re setting it manually, you’re probably doing
something wrong.)  data.sum() should be equal to the
fraction of the PSF flux captured within the boundaries of
the data array.  (However, see “normalize” below.)  The
array must be square, and unless enforce_odd is false, the
length of one side must be an odd number.  Usually the peak
of the PSF (assuming a symmetric PSF– if not, replace
“peak” with “center” or “fiducial point” or however you
think about it) will be centered on the center pixel fo the
array.  ALWAYS the peak of the PSF must be centered within
0.5 <em>non-oversampled</em> pixels of the center of the array.
(That is, if the oversampling factor is 3, the peak of the
PSF will be centered within 1.5 pixels of the center of the
passed array.)  See (x,y) below for discussion of
positioning the PSF on the passed data array.  WARNING : if
you set normalize to True, the passed array will be
modified!</p></li>
<li><p><strong>oversample_factor</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a><em>, </em><em>default 1.</em>) – There are this many pixels along one axis in data for one
pixel in the original image.  Doesn’t have to be an integer
(e.g. if you used PSFex to find the PSF, it usually won’t
be— though if you used PSFex to find the PSF, really we
should be writing a subclass to handle that!).</p></li>
<li><p><strong>x</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a>) – <p>Required.  Position on the source image where this PSF is
evaluated.  Most of the time, but not always, you probably
want x and y to be integer values.  (As in, not integer
typed, but floats that satisfy x-floor(x)=0.)  These are
also the defaults that get_stamp will use if x and y are not
passed to get_stamp.</p>
<p>If x and/or y have nonzero fractional parts, then the data
array must be consistent.  First consider non-oversampled
data.  Suppose you pass a 11×11 array with x=1022.5 and
y=1023.25.  In this case, the peak of a perfectly symmetric
PSF image on data would be at (4.5, 5.25).  (Not (5.5,
5.25)!  If something’s at <em>exactly</em> .5, always round down
here regardless of wheter the integer part is even or odd.)
The center pixel and the one to the right of it should have
the same brightness, and the pixel just below center should
be dimmer than the pixel just above center.</p>
<p>For oversampled psfs, the data array must be properly
shifted to account for non-integral x and y.  The shift will
be as in non-oversampled data, only multiplied by the
oversampling factor.  So, in the same example, if you
specify a peak of (4.5, 5.25), and you have an oversampling
factor of 3, you should pass a 33×33 array with the peak of
the PSF (assuming a symmetric PSF) at (14.5, 16.75).</p>
<p>Note that for off-centered PSFs (meaning the PSF is not
centered on the passed data array), the meaning of (x, y) in
this constructor is <em>different</em> from the meaning of (x, y)
in the photutilsImagePSF constructor.  Use intrinsically
off-center PSFs at your own peril.  (Note that you can
always <em>render</em> stamps with off-centered PSFs in
get_stamp(), regardless of whether the PSF itself is
intrinsically centered or not.)</p>
</p></li>
<li><p><strong>y</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a>) – <p>Required.  Position on the source image where this PSF is
evaluated.  Most of the time, but not always, you probably
want x and y to be integer values.  (As in, not integer
typed, but floats that satisfy x-floor(x)=0.)  These are
also the defaults that get_stamp will use if x and y are not
passed to get_stamp.</p>
<p>If x and/or y have nonzero fractional parts, then the data
array must be consistent.  First consider non-oversampled
data.  Suppose you pass a 11×11 array with x=1022.5 and
y=1023.25.  In this case, the peak of a perfectly symmetric
PSF image on data would be at (4.5, 5.25).  (Not (5.5,
5.25)!  If something’s at <em>exactly</em> .5, always round down
here regardless of wheter the integer part is even or odd.)
The center pixel and the one to the right of it should have
the same brightness, and the pixel just below center should
be dimmer than the pixel just above center.</p>
<p>For oversampled psfs, the data array must be properly
shifted to account for non-integral x and y.  The shift will
be as in non-oversampled data, only multiplied by the
oversampling factor.  So, in the same example, if you
specify a peak of (4.5, 5.25), and you have an oversampling
factor of 3, you should pass a 33×33 array with the peak of
the PSF (assuming a symmetric PSF) at (14.5, 16.75).</p>
<p>Note that for off-centered PSFs (meaning the PSF is not
centered on the passed data array), the meaning of (x, y) in
this constructor is <em>different</em> from the meaning of (x, y)
in the photutilsImagePSF constructor.  Use intrinsically
off-center PSFs at your own peril.  (Note that you can
always <em>render</em> stamps with off-centered PSFs in
get_stamp(), regardless of whether the PSF itself is
intrinsically centered or not.)</p>
</p></li>
<li><p><strong>enforce_odd</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default True</em>) – Enforce the requirement that the data array have an odd length along each axis.</p></li>
<li><p><strong>normalize</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default False</em>) – Ignored if data is not None.  If True, then this constructor
will make sure that data sums to 1 (modifying the passed
data array in so doing!).  If you think that the data array
is big enough that you’re effectively capturing 100% of the
PSF flux, then you should set normalize to True.  If not,
then you should make sure that the data array you pass sums
to the fraction of the PSF flux that you’re passing, and set
normalize to False.  Usually you don’t want to change this,
and you want to trust subclases to do the Right Thing.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)">object</a> of type cls</p>
</dd>
</dl>
<p class="rubric">Methods Summary</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#snappl.psf.YamlSerialized_OversampledImagePSF.read" title="snappl.psf.YamlSerialized_OversampledImagePSF.read"><code class="xref py py-obj docutils literal notranslate"><span class="pre">read</span></code></a>(filepath)</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#snappl.psf.YamlSerialized_OversampledImagePSF.write" title="snappl.psf.YamlSerialized_OversampledImagePSF.write"><code class="xref py py-obj docutils literal notranslate"><span class="pre">write</span></code></a>(filepath)</p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
<p class="rubric">Methods Documentation</p>
<dl class="py method">
<dt class="sig sig-object py" id="snappl.psf.YamlSerialized_OversampledImagePSF.read">
<span class="sig-name descname"><span class="pre">read</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filepath</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/snappl/psf.html#YamlSerialized_OversampledImagePSF.read"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#snappl.psf.YamlSerialized_OversampledImagePSF.read" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="snappl.psf.YamlSerialized_OversampledImagePSF.write">
<span class="sig-name descname"><span class="pre">write</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filepath</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/snappl/psf.html#YamlSerialized_OversampledImagePSF.write"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#snappl.psf.YamlSerialized_OversampledImagePSF.write" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</section>


          </div>
              <div class="related bottom">
                &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="snappl.psf.OversampledImagePSF.html" title="Previous document">OversampledImagePSF</a>
        </li>
        <li>
          <a href="snappl.psf.A25ePSF.html" title="Next document">A25ePSF</a>
          &rarr;
        </li>
    </ul>
  </nav>
              </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &#169;2025, Roman Supernova PIT.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.2.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="../_sources/api/snappl.psf.YamlSerialized_OversampledImagePSF.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>