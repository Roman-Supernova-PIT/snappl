<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>FITSImageOnDisk &#8212; roman_snpit_snappl 0.1.dev1+g4b7a8be4a documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="../_static/basic.css?v=5a6b8c39" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=f3bc516d" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=4ae1632d" />
    <script src="../_static/documentation_options.js?v=5111fa00"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="OpenUniverse2024FITSImage" href="snappl.image.OpenUniverse2024FITSImage.html" />
    <link rel="prev" title="ManualFITSImage" href="snappl.image.ManualFITSImage.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../index.html">
    <img class="logo" src="../_static/logo_black_filled.png" alt="Logo" />
    
  </a>
</p>



<p class="blurb">Software developed by the Roman SNPIT</p>






<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changes.html">Change Log</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../api.html">snappl API</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="../api.html">snappl API</a><ul>
      <li>Previous: <a href="snappl.image.ManualFITSImage.html" title="previous chapter">ManualFITSImage</a></li>
      <li>Next: <a href="snappl.image.OpenUniverse2024FITSImage.html" title="next chapter">OpenUniverse2024FITSImage</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
              <div class="related top">
                &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="snappl.image.ManualFITSImage.html" title="Previous document">ManualFITSImage</a>
        </li>
        <li>
          <a href="snappl.image.OpenUniverse2024FITSImage.html" title="Next document">OpenUniverse2024FITSImage</a>
          &rarr;
        </li>
    </ul>
  </nav>
              </div>
          

          <div class="body" role="main">
            
  <section id="fitsimageondisk">
<h1>FITSImageOnDisk<a class="headerlink" href="#fitsimageondisk" title="Link to this heading">¶</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="snappl.image.FITSImageOnDisk">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">snappl.image.</span></span><span class="sig-name descname"><span class="pre">FITSImageOnDisk</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">noisepath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flagspath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imhdu</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">noisehdu</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flagshdu</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/snappl/image.html#FITSImageOnDisk"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#snappl.image.FITSImageOnDisk" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="snappl.image.FITSImage.html#snappl.image.FITSImage" title="snappl.image.FITSImage"><code class="xref py py-class docutils literal notranslate"><span class="pre">FITSImage</span></code></a></p>
<p>An Image which is represnted by a FITS file on disk.</p>
<p>Either there are three FITS files, one for image, one for noise, one
for flags, or there is one FITS file.  If there is one FITS file,
then imagehdu, noisehdu, and flagshdu must all be different.</p>
<p>(It’s also possible that there’s <em>only</em> an image, which is used for
some intermediate data products within pipelines.)</p>
<p>Instantiate an image.  You probably don’t want to do that.</p>
<p>This is an abstract base class that has limited functionality.
You probably want to instantiate a subclass.</p>
<p>For all implementations, the properties data, noise, and flags
are lazy-loaded.  That is, they start empty, but when you access
them, an internal buffer gets loaded with that data.  This means
it can be very easy for lots of memory to get used without your
realizing it.  There are a couple of solutions.  The first, is
to call Image.free() when you’re sure you don’t need the data
any more, or if you know you want to get rid of it for a while
and re-read it from disk later.  The second is just not to
access the data, noise, and flags properties, instead use
Image.get_data(), and manage the data object lifetime yourself.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – <p>Path to image file, or otherwise some kind of indentifier
that allows the object to find the image.  Exactly what
this needs to be is subclass-dependent, but it is usually
a full absolute path on disk.</p>
<p>If you don’t know the path, but only know (say) the
pointing, band, and sca of an image, then either use the
get_image() method of an appropriate ImageCollection instead
of instantiating an Image directly, or use the
get_image_path() method of an appropriate ImageCollection.</p>
</p></li>
<li><p><strong>pointing</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em> (</em><em>str?</em><em>)</em><em>, </em><em>default None</em>) – The exposure this image is associated with.  If None, then
the image will try to figure out the pointing from the path,
if the specific Image subclass is able to do that.</p></li>
<li><p><strong>sca</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>default None</em>) – The Sensor Chip Assembly that would be called the
chip number for any other telescope but is called SCA for
Roman.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Methods Summary</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#snappl.image.FITSImageOnDisk.get_data" title="snappl.image.FITSImageOnDisk.get_data"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_data</span></code></a>([which, always_reload, cache])</p></td>
<td><p>Read the data from disk and return one or more 2d numpy arrays of data.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#snappl.image.FITSImageOnDisk.get_fits_header" title="snappl.image.FITSImageOnDisk.get_fits_header"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_fits_header</span></code></a>()</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#snappl.image.FITSImageOnDisk.save_data" title="snappl.image.FITSImageOnDisk.save_data"><code class="xref py py-obj docutils literal notranslate"><span class="pre">save_data</span></code></a>([which, overwrite, path, imhdu, ...])</p></td>
<td><p>Write the data to the file.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#snappl.image.FITSImageOnDisk.set_header" title="snappl.image.FITSImageOnDisk.set_header"><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_header</span></code></a>(hdr)</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#snappl.image.FITSImageOnDisk.uncompressed_version" title="snappl.image.FITSImageOnDisk.uncompressed_version"><code class="xref py py-obj docutils literal notranslate"><span class="pre">uncompressed_version</span></code></a>([include, base_dir])</p></td>
<td><p>Make sure to get a FITSImageOnDisk that's not compressed.</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Methods Documentation</p>
<dl class="py method">
<dt class="sig sig-object py" id="snappl.image.FITSImageOnDisk.get_data">
<span class="sig-name descname"><span class="pre">get_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">which</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'all'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">always_reload</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/snappl/image.html#FITSImageOnDisk.get_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#snappl.image.FITSImageOnDisk.get_data" title="Link to this definition">¶</a></dt>
<dd><p>Read the data from disk and return one or more 2d numpy arrays of data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>which</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – <dl class="simple">
<dt>What to read:</dt><dd><p>’data’ : just the image data
‘noise’ : just the noise data
‘flags’ : just the flags data
‘all’ : data, noise, and flags</p>
</dd>
</dl>
</p></li>
<li><p><strong>always_reload</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default False</em>) – Whether this is supported depends on the subclass.  If this
is false, then get_data() has the option of returning the
values of self.data, self.noise, and/or self.flags instead
of always loading the data.  If this is True, then
get_data() will ignore the self._data et al. properties.</p></li>
<li><p><strong>cache</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default False</em>) – Normally, get_data() just reads the data and does not do any
internal caching.  If this is True, and the subclass
supports it, then the object will cache the loaded data so
that future calls with always_reload will not need to reread
the data, nor will accessing the data, noise, and flags
properties.</p></li>
</ul>
</dd>
</dl>
<p>The data read not stored in the class, so when the caller goes
out of scope, the data will be freed (unless the caller saved it
somewhere.  This does mean it’s read from disk every time.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)">list</a> (length 1 or 3 ) of 2d numpy arrays</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="snappl.image.FITSImageOnDisk.get_fits_header">
<span class="sig-name descname"><span class="pre">get_fits_header</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/snappl/image.html#FITSImageOnDisk.get_fits_header"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#snappl.image.FITSImageOnDisk.get_fits_header" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="snappl.image.FITSImageOnDisk.save_data">
<span class="sig-name descname"><span class="pre">save_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">which</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'all'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imhdu</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">noisepath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">noisehdu</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flagspath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flagshdu</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/snappl/image.html#FITSImageOnDisk.save_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#snappl.image.FITSImageOnDisk.save_data" title="Link to this definition">¶</a></dt>
<dd><p>Write the data to the file.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="snappl.image.FITSImageOnDisk.set_header">
<span class="sig-name descname"><span class="pre">set_header</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hdr</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/snappl/image.html#FITSImageOnDisk.set_header"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#snappl.image.FITSImageOnDisk.set_header" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="snappl.image.FITSImageOnDisk.uncompressed_version">
<span class="sig-name descname"><span class="pre">uncompressed_version</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">include</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['data',</span> <span class="pre">'noise',</span> <span class="pre">'flags']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/snappl/image.html#FITSImageOnDisk.uncompressed_version"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#snappl.image.FITSImageOnDisk.uncompressed_version" title="Link to this definition">¶</a></dt>
<dd><p>Make sure to get a FITSImageOnDisk that’s not compressed.</p>
<p>If none of the files for the current FITSImageOnDisk object are
compressed, just return this object.</p>
<p>Otherwise, will write out up to three single-HDU FITS files in
base_dir (which defaults to photometry.snappl.temp_dir from the
config).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>include</strong> (<em>sequence</em><em> of </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – Can include any of ‘data’, ‘noise’, ‘flags’; which things to
write.  Ignored if the current image isn’t compressed.</p></li>
<li><p><strong>base_dir</strong> (<em>Path</em>) – The path to write the files</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The path, noisepath, and flagspath properties will be set
with the random filenames to which the FITS files were written.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#snappl.image.FITSImageOnDisk" title="snappl.image.FITSImageOnDisk">FITSImageOnDisk</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>


          </div>
              <div class="related bottom">
                &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="snappl.image.ManualFITSImage.html" title="Previous document">ManualFITSImage</a>
        </li>
        <li>
          <a href="snappl.image.OpenUniverse2024FITSImage.html" title="Next document">OpenUniverse2024FITSImage</a>
          &rarr;
        </li>
    </ul>
  </nav>
              </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &#169;2025, Roman Supernova PIT.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.2.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="../_sources/api/snappl.image.FITSImageOnDisk.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>